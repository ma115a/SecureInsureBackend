# SecureInsure Monitoring Configuration

# Define the Host (Your local machine running the apps)
define host {
    use                     linux-server            ; Inherit default values from a template
    host_name               secureinsure-app
    alias                   SecureInsure Application Server
    address                 127.0.0.1
    max_check_attempts      5
    check_period            24x7
    notification_interval   30
    notification_period     24x7
}

# --------------------------------------------------------------------------------
# BACKEND MONITORING (Express, Port 8443)
# --------------------------------------------------------------------------------

# Check if the Backend Port is Open
define service {
    use                     generic-service         ; Inherit default values from a template
    host_name               secureinsure-app
    service_description     Backend Port 8443 (Express)
    check_command           check_tcp!8443
}

# Check if the Backend HTTP Endpoint responds
# Note: Using -S for SSL/HTTPS. If your self-signed cert fails verification, add -k (in the command definition, not here usually, unless check_http allows it)
# Assuming standard check_http can handle -S
define service {
    use                     generic-service
    host_name               secureinsure-app
    service_description     Backend HTTP Status
    check_command           check_http!-p 8443 -S
}

# --------------------------------------------------------------------------------
# FRONTEND MONITORING (SvelteKit, Port 5173)
# --------------------------------------------------------------------------------

# Check if the Frontend Port is Open
define service {
    use                     generic-service
    host_name               secureinsure-app
    service_description     Frontend Port 5173 (SvelteKit)
    check_command           check_tcp!5173
}

# Check if the Frontend HTTP Endpoint responds
# SvelteKit dev server usually runs on HTTP, not HTTPS. If HTTPS, add -S.
define service {
    use                     generic-service
    host_name               secureinsure-app
    service_description     Frontend HTTP Status
    check_command           check_http!-p 5173
}
